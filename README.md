# iOS Project Generator

> A self-contained bash script that generates production-ready iOS/SwiftUI projects with XcodeGen, Material Design 3 colors, and modern Swift architecture.

## Features

- ğŸ¨ **Material Design 3 Color System** â€” 6 preset themes + custom hex color support with automatic light/dark mode
- ğŸ—ï¸ **Modern Architecture** â€” Struct-based network layer, protocol-oriented design, value semantics
- âš™ï¸ **Configuration Management** â€” Environment-specific settings via xcconfig files with type-safe access
- ğŸ§ª **Testing Ready** â€” Pre-configured unit and UI tests with Swift Testing (Swift 6) and XCTest (Swift 5)
- ğŸ“¦ **Zero Dependencies** â€” Pure bash, runs on macOS with native tools (osascript for M3 colors)
- ğŸš€ **XcodeGen Integration** â€” Project configuration as code (`project.yml`)

## Requirements

- macOS (tested on macOS 10.15+)
- Bash 3.2+ (ships with macOS)
- [XcodeGen](https://github.com/yonaskolb/XcodeGen) â€” Install via `brew install xcodegen`
- Xcode 15.0+ (for Swift 5) or Xcode 16.0+ (for Swift 6)

## Quick Start

```bash
# Clone the repository
git clone <repository-url>
cd ios-start-script

# Make the script executable (if needed)
chmod +x generate.sh

# Run the generator
./generate.sh

# Follow the interactive prompts, then:
cd MyApp
xcodegen generate
open MyApp.xcodeproj
```

## Usage

The generator will prompt you for:

1. **Project Name** â€” Alphanumeric, hyphens, underscores (e.g., `MyApp`, `my-app`)
2. **Display Name** â€” User-facing app name (can include spaces)
3. **Primary Color** â€” Choose from 6 presets or enter custom hex color
   - Blue (default), Purple, Green, Red, Orange, Teal, or Custom
4. **Organization Name** â€” Your company/organization name
5. **Bundle ID Prefix** â€” Reverse domain notation (e.g., `com.example`)
6. **Deployment Target** â€” Minimum iOS version (â‰¥15.0)
7. **Swift Version** â€” 5 or 6
8. **Output Directory** â€” Where to generate the project
9. **Git Initialization** â€” Optionally create initial commit

### Example Session

```bash
./generate.sh

Project Name: MyApp
Display Name: My Awesome App
Primary color theme: 1 (Blue)
Organization: MyCompany
Bundle ID Prefix: com.mycompany
Deployment Target: 17.0
Swift Version: 6
Output Directory: .
Initialize git? y
Create initial commit? y
```

## Generated Project Structure

```
MyApp/
â”œâ”€â”€ project.yml                          # XcodeGen configuration (source of truth)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ CLAUDE.md                            # AI assistant instructions
â”œâ”€â”€ Sources/
â”‚   â”œâ”€â”€ MyAppApp.swift                   # App entry point
â”‚   â”œâ”€â”€ Modules/
â”‚   â”‚   â””â”€â”€ Root/
â”‚   â”‚       â””â”€â”€ ContentView.swift        # Main view
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ Network/
â”‚   â”‚   â”‚   â””â”€â”€ NetworkClient.swift      # Struct-based HTTP client
â”‚   â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”‚   â””â”€â”€ Sample/
â”‚   â”‚   â”‚       â”œâ”€â”€ SampleAPI.swift      # API endpoint definitions
â”‚   â”‚   â”‚       â”œâ”€â”€ SampleServiceProtocol.swift
â”‚   â”‚   â”‚       â””â”€â”€ SampleService.swift  # Service implementation
â”‚   â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”‚   â””â”€â”€ SampleModel.swift        # Data models
â”‚   â”‚   â””â”€â”€ Utils/
â”‚   â”‚       â””â”€â”€ Configuration.swift      # Type-safe config access
â”‚   â”œâ”€â”€ Resources/
â”‚   â”‚   â”œâ”€â”€ ThemeColors.swift            # M3 UIColor definitions
â”‚   â”‚   â”œâ”€â”€ Color+ThemeColors.swift      # SwiftUI Color extensions
â”‚   â”‚   â””â”€â”€ Images/
â”‚   â”‚       â””â”€â”€ Assets.xcassets
â”‚   â””â”€â”€ Configuration/
â”‚       â”œâ”€â”€ Debug.xcconfig                # Debug environment config
â”‚       â”œâ”€â”€ Release.xcconfig              # Release environment config
â”‚       â””â”€â”€ Info.plist                    # Generated by XcodeGen
â”œâ”€â”€ Tests/
â”‚   â””â”€â”€ MyAppTests/
â”‚       â””â”€â”€ SampleServiceTests.swift
â””â”€â”€ UITests/
    â””â”€â”€ MyAppUITests/
        â””â”€â”€ MyAppUITests.swift
```

## Key Features

### Material Design 3 Color System

The generator includes a bundled M3 color algorithm (`lib/m3_engine.js`) that generates 33 semantic color tokens from a single primary color:

```swift
// UIKit
let primaryColor = ThemeColors.primary
let surfaceColor = ThemeColors.surface

// SwiftUI
Color.Theme.primary
Color.Theme.onPrimaryContainer
```

**Presets:**
- Blue (#0061A4) â€” Default, professional
- Purple (#6750A4) â€” Creative
- Green (#006E1C) â€” Nature, health
- Red (#BA1A1A) â€” Urgent, bold
- Orange (#8B5000) â€” Energetic
- Teal (#006A6A) â€” Modern, tech

**Custom Hex:** Enter any hex color (e.g., `#FF5733`) for brand-specific palettes.

### Network Layer

Struct-based, protocol-oriented architecture with async/await:

```swift
// Define endpoints
enum UserAPI {
    case fetchUser(id: String)
    case updateUser(id: String, name: String)
}

extension UserAPI: Endpoint {
    var baseURL: URL { URL(string: Configuration.baseURL)! }
    var path: String { /* ... */ }
    var method: HTTPMethod { /* ... */ }
}

// Use in services
struct UserService: UserServiceProtocol {
    let networkClient: NetworkClientProtocol

    func fetchUser(id: String) async throws -> User {
        try await networkClient.request(UserAPI.fetchUser(id: id))
    }
}
```

### Configuration Management

Environment-specific values via xcconfig files:

**Debug.xcconfig:**
```
API_BASE_URL = https://staging.api.example.com
```

**Release.xcconfig:**
```
API_BASE_URL = https://api.example.com
```

**Access in code:**
```swift
let baseURL = Configuration.baseURL  // Type-safe, crashes early if missing
```

Values are injected into Info.plist during build and accessed via `Bundle.main`.

### Testing

Generated projects include test targets with mock implementations:

**Swift Testing (Swift 6):**
```swift
@Test func testFetchSamplesSuccess() async throws {
    mockNetworkClient.mockResponse = [/* test data */]
    let result = try await sut.fetchSamples()
    #expect(result.count == 1)
}
```

**XCTest (Swift 5):**
```swift
func testFetchSamplesSuccess() async throws {
    mockNetworkClient.mockResponse = [/* test data */]
    let result = try await sut.fetchSamples()
    XCTAssertEqual(result.count, 1)
}
```

## Development

### Project Structure

```
ios-start-script/
â”œâ”€â”€ generate.sh                    # Entry point
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ utils.sh                   # Colors, formatting, print helpers
â”‚   â”œâ”€â”€ validation.sh              # Input validation
â”‚   â”œâ”€â”€ prompts.sh                 # Interactive prompts
â”‚   â”œâ”€â”€ scaffold.sh                # Directory creation
â”‚   â”œâ”€â”€ git.sh                     # Git initialization
â”‚   â”œâ”€â”€ m3_engine.js               # M3 color algorithm (bundled)
â”‚   â””â”€â”€ templates/                 # Template generators
â”‚       â”œâ”€â”€ project_yml.sh
â”‚       â”œâ”€â”€ gitignore.sh
â”‚       â”œâ”€â”€ swift_sources.sh       # Network, services, app files
â”‚       â”œâ”€â”€ colors.sh              # M3 color generation
â”‚       â”œâ”€â”€ tests.sh
â”‚       â””â”€â”€ claude_md.sh
â””â”€â”€ CLAUDE.md                      # Project instructions
```

### Adding New Features

1. **New Template:** Create function in `lib/templates/` and call from `generate.sh`
2. **New Validation:** Add to `lib/validation.sh`
3. **New Prompt:** Add to `lib/prompts.sh`
4. **Test Changes:**
   ```bash
   ./generate.sh
   cd TestProject
   xcodegen generate
   xcodebuild -scheme TestProject -sdk iphonesimulator build
   ```

### Git Conventions

Use [Conventional Commits](https://www.conventionalcommits.org/):

```
feat(generator): add dark mode support
fix(validation): handle empty project name
docs(readme): update installation instructions
refactor(network): convert to struct-based design
```

## Troubleshooting

### XcodeGen Not Found
```bash
brew install xcodegen
```

### M3 Color Engine Issues
The bundled `lib/m3_engine.js` uses JavaScriptCore via `osascript`. If you encounter issues:
- Ensure you're on macOS (required for osascript)
- Check that `lib/m3_engine.js` exists and is readable
- Use preset colors instead of custom hex as a workaround

### Build Errors
```bash
# Clean and regenerate
cd MyApp
rm -rf MyApp.xcodeproj
xcodegen generate
open MyApp.xcodeproj
```

### Code Signing Issues
For simulator builds:
```bash
xcodebuild -scheme MyApp -sdk iphonesimulator build \
  CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO
```

## Examples

### Minimal Project (Defaults)
```bash
./generate.sh <<EOF
MyApp
MyApp
1


17.0
6
.
n
n
EOF
```

### Custom Brand Color
```bash
./generate.sh <<EOF
BrandApp
Brand App
7
#FF5733
MyCompany
com.mycompany
16.0
6
.
y
y
EOF
```

## Compatibility

- **macOS:** Bash 3.2+ (no bash 4+ features used)
- **Swift:** 5.x or 6.x (user-selectable)
- **iOS:** 15.0+ deployment targets
- **Xcode:** 15.0+ (Swift 5) or 16.0+ (Swift 6)

## Architecture Decisions

### Why Structs for Network/Services?
- **Value semantics:** Immutable configuration reduces bugs
- **Performance:** Stack allocation, no ARC overhead
- **Testability:** Easy dependency injection via initializers
- **Swift-native:** Aligns with Swift's protocol-oriented design

### Why XcodeGen?
- **Version control friendly:** YAML diffs vs opaque `.xcodeproj`
- **Reproducible:** Same `project.yml` always generates identical project
- **Maintainable:** Easier to modify targets, schemes, settings
- **Collaboration:** Fewer merge conflicts

### Why Bash?
- **Portability:** Ships with every Mac
- **Zero dependencies:** No Node, Python, Ruby required
- **Simple:** Text manipulation, file generation
- **Reliable:** Mature, stable, well-documented

## License

[Your License Here]

## Contributing

Contributions are welcome! Please follow:
1. Fork the repository
2. Create a feature branch (`git checkout -b feat/amazing-feature`)
3. Commit with conventional commits (`feat:`, `fix:`, etc.)
4. Push and open a pull request

## Credits

- Material Design 3 color algorithm: [@material/material-color-utilities](https://github.com/material-foundation/material-color-utilities)
- XcodeGen: [yonaskolb/XcodeGen](https://github.com/yonaskolb/XcodeGen)

---

**Made with â¤ï¸ for Swift developers who value clean architecture and automation.**
